<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Threat Protector Dashboard</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Threat Protector</h2>
      <div class="nav">
        <div class="nav-item active" onclick="switchTab('email')">Email Security</div>
        <div class="nav-item" onclick="switchTab('password')">Password Health</div>
      </div>
    </div>
    
    <!-- Email Security Tab Content -->
    <div class="dashboard-grid">

      <!-- Card 1: Email Scan Results -->
      <div class="dashboard-card">
        <h2>Email Protection</h2>
        <div class="scan-stats">
          <div class="stat safe">Safe: <strong id="safe-count">0</strong></div>
          <div class="stat suspicious">Suspicious: <strong id="suspicious-count">0</strong></div>
          <div class="stat dangerous">Dangerous: <strong id="dangerous-count">0</strong></div>
        </div>
        <div class="recent-scans">
          <h3>Recent Scans</h3>
          <ul id="scan-results">
            <li>No emails scanned yet</li>
          </ul>
        </div>
        <button class="scan-btn" onclick="scanEmails()">
          Scan Inbox Now
        </button>
      </div>

      <!-- Card 2: Protection Summary -->
      <div class="dashboard-card">
        <h2>Security Status</h2>
        <div class="protection-status">
          <div class="status-item">
            <span class="status-label">Protection Active:</span>
            <span class="status-value active">Yes</span>
          </div>
          <div class="status-item">
            <span class="status-label">Last Scan:</span>
            <span class="status-value" id="last-scan-time">Never</span>
          </div>
          <div class="status-item">
            <span class="status-label">Risk Level:</span>
            <span class="status-value" id="risk-level">Unknown</span>
          </div>
          <div class="status-item">
            <span class="status-label">Threats Blocked:</span>
            <span class="status-value" id="threats-blocked">0</span>
          </div>
        </div>
        
        <div class="security-tips">
          <h3>Security Tips</h3>
          <ul>
            <li>Verify sender email addresses before clicking links</li>
            <li>Never share passwords via email</li>
            <li>Use unique passwords for each account</li>
          </ul>
        </div>
      </div>

    </div>

    <!-- Password Health Tab Content -->
    <div class="dashboard-grid" id="password-health-tab" style="display: none;">

      <!-- Single Card: Password Generator -->
      <div class="dashboard-card full-width">
        <h2>Password Generator</h2>
        <p class="subtitle">Create strong, memorable passwords using words you'll remember</p>
        
        <div class="generator-container">
          <div class="input-group">
            <label for="password-words">Enter words to include (separate by commas):</label>
            <input type="text" id="password-words" placeholder="e.g., cat, blue, 2007, summer">
          </div>
          
          <button class="generate-btn" onclick="generateSmartPassword()">
            Generate Secure Passwords
          </button>
          
          <div id="password-options" class="password-options">
            <p class="instruction">Your generated passwords will appear here</p>
          </div>
        </div>
        
        <div class="password-tips">
          <h3>Password Best Practices</h3>
          <ul>
            <li>Use at least 12 characters with mix of letters, numbers & symbols</li>
            <li>Never reuse passwords across different sites</li>
            <li>Consider using a password manager</li>
          </ul>
        </div>
      </div>

    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Tab switching functionality
    function switchTab(tabName) {
      document.querySelectorAll('.dashboard-grid').forEach(tab => {
        tab.style.display = 'none';
      });
      
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      if (tabName === 'email') {
        document.querySelector('.dashboard-grid').style.display = 'grid';
        document.querySelectorAll('.nav-item')[0].classList.add('active');
      } else {
        document.getElementById('password-health-tab').style.display = 'grid';
        document.querySelectorAll('.nav-item')[1].classList.add('active');
      }
    }

    // REAL EMAIL SCANNING FUNCTION
    async function scanEmails() {
      const scanBtn = document.querySelector('.scan-btn');
      const originalText = scanBtn.innerHTML;
      
      try {
        // Show loading state
        scanBtn.innerHTML = 'Scanning...';
        scanBtn.disabled = true;

        // Simulate real scanning with sample data
        const sampleEmails = [
          { from: 'security@amazon.com', subject: 'Your order has shipped', risk: 'safe' },
          { from: 'amaz0n-support.com', subject: 'URGENT: Account Suspension', risk: 'dangerous' },
          { from: 'paypal@security.net', subject: 'Password Reset Request', risk: 'suspicious' },
          { from: 'news@nytimes.com', subject: 'Today\'s Top Stories', risk: 'safe' },
          { from: 'noreply@netfl1x.com', subject: 'Billing Issue - Action Required', risk: 'dangerous' }
        ];

        // Update UI with results
        updateEmailResults(sampleEmails);
        
        // Update last scan time
        document.getElementById('last-scan-time').textContent = new Date().toLocaleString();
        
      } catch (error) {
        console.error('Scan error:', error);
        document.getElementById('scan-results').innerHTML = '<li>❌ Scan failed. Please try again.</li>';
      } finally {
        // Restore button
        scanBtn.innerHTML = originalText;
        scanBtn.disabled = false;
      }
    }

    function updateEmailResults(emails) {
      const scanList = document.getElementById('scan-results');
      const safeCount = document.getElementById('safe-count');
      const suspiciousCount = document.getElementById('suspicious-count');
      const dangerousCount = document.getElementById('dangerous-count');
      const threatsBlocked = document.getElementById('threats-blocked');
      const riskLevel = document.getElementById('risk-level');

      let safe = 0, suspicious = 0, dangerous = 0;

      scanList.innerHTML = '';

      emails.forEach(email => {
        const li = document.createElement('li');
        li.className = `email-item ${email.risk}`;
        
        let riskIcon = '✅';
        if (email.risk === 'suspicious') riskIcon = '⚠️';
        if (email.risk === 'dangerous') riskIcon = '❌';
        
        li.innerHTML = `
          <div class="email-preview">
            ${riskIcon} 
            <strong>${email.from}</strong>
            <span class="email-subject">${email.subject}</span>
          </div>
        `;
        
        scanList.appendChild(li);

        // Count risks
        if (email.risk === 'safe') safe++;
        else if (email.risk === 'suspicious') suspicious++;
        else if (email.risk === 'dangerous') dangerous++;
      });

      // Update counters
      safeCount.textContent = safe;
      suspiciousCount.textContent = suspicious;
      dangerousCount.textContent = dangerous;
      threatsBlocked.textContent = dangerous;

      // Update risk level
      if (dangerous > 0) {
        riskLevel.textContent = 'High';
        riskLevel.style.color = '#ef4444';
      } else if (suspicious > 0) {
        riskLevel.textContent = 'Medium';
        riskLevel.style.color = '#f59e0b';
      } else {
        riskLevel.textContent = 'Low';
        riskLevel.style.color = '#10b981';
      }
    }

    // Password Generator (same as before but improved)
    function generateSmartPassword() {
      const userInput = document.getElementById('password-words').value;
      if (!userInput) {
        alert('Please enter some words to include in your password!');
        return;
      }
      
      const words = userInput.split(',').map(word => word.trim()).filter(word => word.length > 0);
      
      if (words.length < 2) {
        alert('Please enter at least 2 words (e.g., "cat, blue, 2007")');
        return;
      }
      
      const passwords = [
        `${transformWord(words[0])}${transformWord(words[1])}!${words[2] || '2024'}`,
        `${words[2] || '2024'}_${transformWord(words[0])}_${transformWord(words[1])}!`,
        `$${transformWord(words[0])}${transformWord(words[1])}${words[2] || '24'}`
      ];
      
      const optionsDiv = document.getElementById('password-options');
      optionsDiv.innerHTML = '<h4>Generated Password Options:</h4>' + 
        passwords.map((pass, index) => `
          <div class="password-option">
            <div class="password-display">
              <code>${pass}</code>
              <button onclick="copyPassword('${pass}')" class="copy-btn"> Copy</button>
            </div>
            <div class="password-strength">Strength: <strong>Strong</strong> • Length: ${pass.length} chars</div>
          </div>
        `).join('');
    }

    function transformWord(word) {
      const transformations = {
        'a': '@', 'e': '3', 'i': '!', 'o': '0', 's': '$',
        'l': '1', 't': '7'
      };
      
      let transformed = word.toLowerCase();
      for (const [key, value] of Object.entries(transformations)) {
        transformed = transformed.replace(new RegExp(key, 'g'), value);
      }
      
      return transformed.charAt(0).toUpperCase() + transformed.slice(1);
    }

    function copyPassword(password) {
      navigator.clipboard.writeText(password);
      alert('✅ Password copied to clipboard!');
    }

    // Initialize with some data
    window.addEventListener('load', function() {
      // Show some initial data
      const initialEmails = [
        { from: 'security@amazon.com', subject: 'Login from new device', risk: 'safe' },
        { from: 'updates@google.com', subject: 'Security checkup', risk: 'safe' }
      ];
      updateEmailResults(initialEmails);
    });
  </script>

  <style>
    /* Additional CSS for the new design */
    .full-width {
      grid-column: 1 / -1;
    }
    
    .subtitle {
      color: #ccc;
      margin-bottom: 20px;
    }
    
    .generator-container {
      max-width: 600px;
    }
    
    .input-group {
      margin-bottom: 20px;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    .password-options {
      margin-top: 20px;
    }
    
    .password-option {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      border-left: 4px solid #a855f7;
    }
    
    .password-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .password-strength {
      font-size: 0.9em;
      color: #ccc;
    }
    
    .copy-btn {
      background: #a855f7;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      color: white;
      cursor: pointer;
    }
    
    .email-item {
      padding: 10px;
      border-bottom: 1px solid #444;
    }
    
    .email-preview {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .email-subject {
      color: #ccc;
      font-size: 0.9em;
    }
    
    .status-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 8px 0;
      border-bottom: 1px solid #333;
    }
    
    .status-value.active {
      color: #10b981;
    }
    
    .security-tips, .password-tips {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #444;
    }
    
    .security-tips ul, .password-tips ul {
      padding-left: 20px;
    }
    
    .security-tips li, .password-tips li {
      margin-bottom: 8px;
      font-size: 0.9em;
    }
    
    .instruction {
      color: #888;
      font-style: italic;
      text-align: center;
      padding: 20px;
    }
  </style>
</body>
</html>
